# Используем базовый образ Python 3.8.13 на основе Debian Bullseye
FROM python:3.8.13-bullseye

# Устанавливаем переменную окружения PYTHONUNBUFFERED в значение 1,
# чтобы отключить буферизацию вывода Python. Это полезно для отладки и логирования.
ENV PYTHONUNBUFFERED=1

# Устанавливаем рабочую директорию внутри контейнера на /backend.
# Все последующие команды будут выполняться относительно этой директории.
WORKDIR /backend

# Копируем файл requirements.txt из текущей директории на хосте в директорию /app/ внутри контейнера.
COPY requirements.txt /backend/

# Устанавливаем все зависимости, указанные в файле requirements.txt, используя pip.
# Опция --no-cache-dir указывает pip не использовать кэш для ускорения установки.
RUN pip install --upgrade pip
RUN pip install -r /backend/requirements.txt

# Копируем все файлы и директории из текущей директории на хосте в рабочую директорию внутри контейнера (/backend).
COPY . .

# Указываем Docker, что контейнер будет прослушивать порт 8000.
# Это не открывает порт на хосте, но документирует, что контейнер будет использовать этот порт.
EXPOSE 8000
